# Update:2025.8.24
# ------------------
# 下载配置后，需要自行添加机场订阅链接
# 此处推荐使用Sub-Store订阅链接，多机场用户可以将多个机场订阅整合为一个Sub-Store订阅
# Surge MAC：
# 显示主窗口 - 策略 - 右键编辑"机场订阅"策略组 - 选择"可选策略组"下一步 - 更换“同时包含外部策略”对话框中的链接为你自己的Sub-Store订阅链接或机场订阅链接；
# Surge iOS
# 首页 - “出站模式”模块下选择“代理服务器” - 选择“机场订阅”策略组 - 下拉到底部“外部代理列表” - 更换其中的链接为你自己的Sub-Store订阅链接或机场订阅链接；
# ------------------
[General]
# ------------------通用设置------------------
# ---延迟设置---
# > 网络访问延迟测速URL
internet-test-url = http://www.baidu.com
# > 代理延迟测速URL
proxy-test-url = http://cp.cloudflare.com/generate_204
# > 测试超时（秒）
test-timeout = 3
# ---GeoIP数据库---
# > 自定义GeoIP数据库
geoip-maxmind-url = https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb
# ---WiFi助理---
# 在Wi-Fi网络不佳时尝试使用数据网络建立连接
# ture=开启，false=关闭
wifi-assist = ture
# ---WiFi访问---
# > 允许WiFi访问
# >> iOS，若允许远程访问将false改为true
allow-wifi-access = false
wifi-access-http-port = 6152
wifi-access-socks5-port = 6153
# >> macOS，若允许远程访问将127.0.0.1改为0.0.0.0
http-listen = 0.0.0.0
socks5-listen = 0.0.0.0
# ---远程控制器---
# > 允许Surge请求查看器或Surge CI进行管理控制
# @前内容为密码
external-controller-access = 123456@127.0.0.1:6170
# > HTTP API
# 可以让另一个App或者设备通过HTTP API控制Surge功能
# @前内容为密码
http-api = 123456@127.0.0.1:6166
# > 远程控制器开关
http-api-tls = true
http-api-web-dashboard = true
# ---兼容性设置---
# > IPv6 支持（默认关闭）
ipv6 = ture
# > 兼容模式(仅iOS)
# compatibility-mode = 0
# > 排除简单主机名
exclude-simple-hostnames = true
# > 跳过代理
skip-proxy = localhost, *.local, 10.0.0.0/8, 100.64.0.0/10, 127.0.0.1/32, 169.254.0.0/16, 172.16.0.0/12, 192.168.0.0/16,192.168.122.1/32, 193.168.0.1/32, 224.0.0.0/4, 240.0.0.0/4, 255.255.255.255/32, *.crashlytics.com, passenger.t3go.cn, captive.apple.com, seed-sequoia.siri.apple.com, sequoia.apple.com, injections.adguard.org, local.adguard.org
# ---DNS 服务器---
# 如无必要不建议使用DNS over HTTPS
dns-server = 119.29.29.29, 223.5.5.5, 8.8.8.8, system
hijack-dns = 8.8.8.8:53, 8.8.4.4:53
# > 从/etc/hosts读取DNS记录
read-etc-hosts = true 
# ---高级设置---
# > 日志级别
loglevel = notify
# > 当遇到REJECT策略时返回错误页
show-error-page-for-reject = true
# > Always Real IP Hosts
# 当Surge VIF处理DNS问题时，要求Surge返回真实IP地址
always-real-ip = *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.logon.battlenet.com.cn, *.logon.battle.net, stun.l.google.com
# > TCP Force HTTP Hosts
# 让Surge把TCP连接当作HTTP请求来处理
# Surge HTTP引擎将处理这些请求
# 所有的高级功能，如捕获、重写和脚本等都可以使用
force-http-engine-hosts = *.ott.cibntv.net
# > UDP转发
# 如果没有代理服务器支持UDP转发
# 可修改为direct或注释本条
# 需注意同一目标主机名TCP请求与UDP请求的源地址不同所造成的隐私及安全风险
udp-policy-not-supported-behaviour = reject

[Proxy Group]
# > 策略组
自动选择 = url-test, policy-path=机场订阅, update-interval=0
谷歌服务 = select, 香港节点, 台湾节点, 新加坡加点, 日本节点, 美国节点
香港测速 = url-test, policy-path=机场订阅, update-interval=0, policy-regex-filter=(香港|港|hong|HK|HKG|🇭🇰), interval=600, timeout=3, hidden=true
海外媒体 = select, 香港节点, 台湾节点, 新加坡加点, 日本节点, 美国节点
国内直连 = select, DIRECT, 漏网之鱼
YouTube = select, 香港节点, 台湾节点, 新加坡加点, 日本节点, 美国节点
Spotify = select, DIRECT, 香港节点, 台湾节点, 新加坡加点, 日本节点, 美国节点
Bilibili = select, DIRECT, 香港节点, 台湾节点
Emby服务 = select, 香港节点, 香港测速, 台湾节点, 新加坡加点, 日本节点, 美国节点
Telegram = select, 香港节点, 台湾节点, 新加坡加点, 日本节点, 美国节点
智能助理 = select, 香港节点, 台湾节点, 新加坡加点, 日本节点, 美国节点
TikTok = select, 香港节点, 台湾节点, 新加坡加点, 日本节点, 美国节点, 冷门节点
漏网之鱼 = select, 自动选择, 香港测速, DIRECT
广告拦截 = select, REJECT, 自动选择, DIRECT # hidden=true
# > 外部节点
香港节点 = smart, policy-path=机场订阅, update-interval=0, policy-regex-filter=(香港|港|hong|HK|HKG|🇭🇰)
台湾节点 = smart, policy-path=机场订阅, update-interval=0, policy-regex-filter=(台|台湾|TW|Taiwan)
新加坡加点 = smart, policy-path=机场订阅, update-interval=0, policy-regex-filter=(狮城|新加坡|🇸🇬|SG|Singapore)
日本节点 = smart, policy-path=机场订阅, update-interval=0, policy-regex-filter=(日本|东京|大阪|泉日|埼玉|沪日|深日|🇯🇵|JP|Japan)
美国节点 = smart, policy-path=机场订阅, update-interval=0, policy-regex-filter=(美|美国|美|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥|🇺🇸|US)
冷门节点 = select, policy-path=机场订阅, update-interval=0, policy-regex-filter=^((?!🇭🇰|奈飞|港|HK|Hong|🇹🇼|台|TW|Tai|🇯🇵|日本|JP|Japan|🇸🇬|坡|狮城|SG|Singapore|🇰🇷|韩|KR|KOR|Korea|🇺🇸|美|US|States|American|Music).)*$
机场订阅 = select, policy-path=订阅地址, update-interval=0,policy-regex-filter=^((?!最新网址|剩余流量|套餐到期邀请|Direct|返利|循环|官网|客服|网站|网址|获取|订阅|流量|到期|机场|下次|版本|官址|备用|过期|已用|联系|邮箱|工单|贩卖|通知|倒卖|防止|国内|地址|频道|无法|说明|使用|提示|特别|访问|支持).)*$

[Rule]
DOMAIN,bw.erdongchan.cn,香港节点
# ---域名规则---
# ＞ 腾讯 WeChat ASN
IP-ASN,132203,DIRECT
IP-ASN,56040,DIRECT
IP-ASN,45090,DIRECT
# > 抖音本地分流
DOMAIN-SUFFIX,snssdk.com,DIRECT
DOMAIN-SUFFIX,amemv.com,DIRECT
# > 其它
DOMAIN-SUFFIX,local,DIRECT
DOMAIN-SUFFIX,kuaishou.com,DIRECT
# ---进程规则---
# > 只在macOS生效，iOS会自动忽略这个类型的规则
PROCESS-NAME,UUBooster,DIRECT
# ---逻辑规则---
# > AND规则:当所含规则全部匹配时，会被触发
AND,((PROTOCOL,UDP), (DEST-PORT,443)),REJECT-NO-DROP
# > 屏蔽 YouTube 的 UDP
AND,((PROTOCOL,UDP), (DOMAIN-SUFFIX,googlevideo.com)),REJECT-NO-DROP
# > Safari 访问防跳转 App
DOMAIN,app-site-association.cdn-apple.com,REJECT
# > 绕过 App 企业证书过期
DOMAIN,ocsp.apple.com,REJECT
# > 防止Telegram加载转圈
IP-CIDR,95.161.76.100/31,REJECT-NO-DROP,no-resolve
# 阻止Telegram频繁请求
AND,((PROCESS-NAME,Telegram), (OR,((IP-CIDR,0.0.0.0/8), (IP-CIDR,224.0.0.0/4)))),REJECT
# > Boxjs 代理
DOMAIN-KEYWORD,jsdelivr.net,谷歌服务
# > Sub-Store 的 Web 页面
DOMAIN-SUFFIX,vercel.app,谷歌服务
# ---规则集----
# ---内置规则集---
# SYSTEM
# > 包含了绝大多数来自macOS和iOS系统本身所发送的请求
RULE-SET,SYSTEM,DIRECT
# ---远程规则集---
# > 去广告
# Advertising 广告
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Advertising/Advertising.list,广告拦截
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Advertising/Advertising_Domain.list,广告拦截
# Privacy 隐私
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Privacy/Privacy_Domain.list,广告拦截
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Privacy/Privacy_Domain.list,广告拦截
# Hijacking 运营商劫持或恶意网站
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Hijacking/Hijacking.list,广告拦截
# ＞ 规则修正
RULE-SET,https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Surge/Ruleset/Unbreak.list,DIRECT 
# > 苹果服务
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple_All_No_Resolve.list,国内直连
# > 软件&服务
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Surge/WeChat/WeChat_Resolve.list,国内直连
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Telegram/Telegram.list,Telegram
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GitHub/GitHub.list,谷歌服务,no-resolve
RULE-SET,https://raw.githubusercontent.com/EAlyce/conf/refs/heads/main/Rule/OpenAI.list,智能助理
# > 微软服务
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Microsoft/Microsoft.list,国内直连
# > 流媒体
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/BiliBili/BiliBili.list,Bilibili
RULE-SET,https://raw.githubusercontent.com/johnq1984/-/refs/heads/main/Emby.list,Emby服务
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTube/YouTube.list,YouTube
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTubeMusic/YouTubeMusic.list,海外媒体
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Spotify/Spotify.list,Spotify
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/TikTok/TikTok.list,TikTok
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Netflix/Netflix.list,海外媒体
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Disney/Disney.list,海外媒体
# > 谷歌服务
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Google/Google.list,谷歌服务,no-resolve
# > 流媒体集合
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/ChinaMedia/ChinaMedia.list,国内直连
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GlobalMedia/GlobalMedia.list,海外媒体
# Mainland 国内访问
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/China/China.list,国内直连
# Global 全球加速
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Global/Global.list,谷歌服务
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Global/Global_Domain.list,谷歌服务
# ---IP地址规则---
# > 局域网地址
RULE-SET,LAN,DIRECT
# > GeoIP China
GEOIP,CN,DIRECT
# ---Final规则---
# > 必须写在所有其他类型的规则之后
# > 当某条请求不匹配以上任何一条规则，则与FINAL规则匹配，DNS 查询失败走 Final 规则
FINAL,漏网之鱼,dns-failed

[Host]
# ---定义本地DNS记录---
# 该功能等同于 /etc/hosts，加上了泛解析和别名支持
# IPv6
ip6-localhost = ::1
ip6-loopback = ::1
# > Firebase Cloud Messaging
mtalk.google.com = 108.177.125.188
# > Google Dl
dl.google.com = server:119.29.29.29
dl.l.google.com = server:119.29.29.29
update.googleapis.com = server:119.29.29.29
# > PlayStation
*.dl.playstation.net = server:119.29.29.29
# > 淘宝
taobao.com = server:223.5.5.5
*.taobao.com = server:223.5.5.5
# > 天猫
tmall.com = server:223.5.5.5
*.tmall.com = server:223.5.5.5
# > 阿里云
*.alicdn.com = server:223.5.5.5
*.aliyun.com = server:223.5.5.5
# > 腾迅
*.tencent.com = server:119.29.29.29
# > 腾讯QQ
*.qq.com = server:119.29.29.29
# > 微信
weixin.com = server:119.29.29.29
*.weixin.com = server:119.29.29.29
*.qpic.cn = server:119.29.29.29
# > 京东
*.jd.com = server:119.29.29.29
# > 哔哩哔喱
*.bilibili.com = server:119.29.29.29
hdslb.com = server:119.29.29.29
# > 网易
*.163.com = server:119.29.29.29
*.126.com = server:119.29.29.29
*.126.net = server:119.29.29.29
*.127.net = server:119.29.29.29
*.netease.com = server:119.29.29.29
# > 小米
*.mi.com = server:119.29.29.29
*.xiaomi.com = server:119.29.29.29
# 解锁了「模块」功能的用户可以使用 General.sgmodule 后可移除 [URL Rewrite] 及 [MITM] 的「hostname = www.google.cn,api.abema.io」部分
# 建议使用 General.sgmodule，其他 .sgmodule 按需加入
# 未解锁「模块」功能的用户不要删除以下内容，参照
# (https://github.com/DivineEngine/Profiles/tree/master/Surge)使用快捷指令更新相关内容。

[MITM]
skip-server-cert-verify = true
h2 = true
hostname = p0.meituan.net, p0.meituan.net, lf-cdn-tos.bytescm.com, lf-cdn-tos.bytescm.com, m.360buyimg.com, 95.161.76.101, www.google.cn, -buy.itunes.apple.com, %APPEND% api-sams.walmartmobile.cn, raw.githubusercontent.com, gist.githubusercontent.com, github.com
ca-passphrase = 23E5EA69
ca-p12 = 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
